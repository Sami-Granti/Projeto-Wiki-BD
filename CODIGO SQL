CREATE DATABASE Bloons_BD;

USE Bloons_BD;

CREATE TABLE Bloons (
    NomePK VARCHAR(50) PRIMARY KEY,
    Tier VARCHAR(20) NOT NULL
);

CREATE TABLE Resistencia (
    IDResistencia INT AUTO_INCREMENT PRIMARY KEY,
    NomeBloonFK VARCHAR(50) NOT NULL,
    ValorResistencia VARCHAR(50) NOT NULL,
    FOREIGN KEY (NomeBloonFK) REFERENCES Bloons(NomePK)
);

CREATE TABLE Upgrade (
    CodPK INT AUTO_INCREMENT PRIMARY KEY,
    NomeFK VARCHAR(50) NOT NULL,
    Descricao TEXT,
    Custo DECIMAL(10,2) NOT NULL,
    Tier VARCHAR(20)
);

CREATE TABLE Pop (
    IDPop INT AUTO_INCREMENT PRIMARY KEY,
    CodUpgradeFK INT NOT NULL,
    ValorPop VARCHAR(50) NOT NULL,
    FOREIGN KEY (CodUpgradeFK) REFERENCES Upgrade(CodPK)
);

CREATE TABLE Boss (
    NomePK VARCHAR(50) PRIMARY KEY,
    Vida INT NOT NULL,
    Tier VARCHAR(20) NOT NULL
);

CREATE TABLE Upgrade_Boss (
    CodUpgradeFK INT,
    NomeBossFK VARCHAR(50),
    PRIMARY KEY (CodUpgradeFK, NomeBossFK),
    FOREIGN KEY (CodUpgradeFK) REFERENCES Upgrade(CodPK),
    FOREIGN KEY (NomeBossFK) REFERENCES Boss(NomePK)
);

CREATE TABLE Macaco (
    NomePK VARCHAR(50) PRIMARY KEY,
    TipoClasseFK VARCHAR(50) NOT NULL,
    Custo DECIMAL(10,2) NOT NULL,
    Terreno VARCHAR(50) NOT NULL
);

CREATE TABLE Poplnato (
    IDPoplnato INT AUTO_INCREMENT PRIMARY KEY,
    NomeMacacoFK VARCHAR(50) NOT NULL,
    ValorPoplnato VARCHAR(50) NOT NULL,
    FOREIGN KEY (NomeMacacoFK) REFERENCES Macaco(NomePK)
);

CREATE TABLE Classe (
    TipoClassePK VARCHAR(50) PRIMARY KEY
);

CREATE TABLE Poderes (
    IDPK INT AUTO_INCREMENT PRIMARY KEY,
    TipoClasseFK VARCHAR(50) NOT NULL,
    Efeito TEXT NOT NULL,
    Custo DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (TipoClasseFK) REFERENCES Classe(TipoClassePK)
);

CREATE TABLE Heroi (
    NomePK VARCHAR(50) PRIMARY KEY,
    TipoClasseFK VARCHAR(50) NOT NULL,
    Custo DECIMAL(10,2) NOT NULL,
    Nivel INT NOT NULL,
    DescricaoX20 TEXT,
    FOREIGN KEY (TipoClasseFK) REFERENCES Classe(TipoClassePK)
);

CREATE TABLE Conta (
    UsuarioPK VARCHAR(50) PRIMARY KEY,
    Senha VARCHAR(255) NOT NULL
);

CREATE TABLE Mapa (
    NomePK VARCHAR(50) PRIMARY KEY,
    Lanes INT NOT NULL,
    Dificuldade VARCHAR(20) NOT NULL
);

CREATE TABLE Conta_Mapa (
    UsuarioContaFK VARCHAR(50),
    NomeMapaFK VARCHAR(50),
    PRIMARY KEY (UsuarioContaFK, NomeMapaFK),
    FOREIGN KEY (UsuarioContaFK) REFERENCES Conta(UsuarioPK),
    FOREIGN KEY (NomeMapaFK) REFERENCES Mapa(NomePK)
);

CREATE TABLE ConhecimentoSimio (
    IDPK INT AUTO_INCREMENT PRIMARY KEY,
    Tier VARCHAR(20) NOT NULL,
    Custo DECIMAL(10,2) NOT NULL,
    Descricao TEXT NOT NULL,
    TipoClasseFK VARCHAR(50) NOT NULL,
    FOREIGN KEY (TipoClasseFK) REFERENCES Classe(TipoClassePK)
);

CREATE TABLE Conta_ConhecimentoSimio (
    UsuarioContaFK VARCHAR(50),
    IDConhecimentoFK INT,
    PRIMARY KEY (UsuarioContaFK, IDConhecimentoFK),
    FOREIGN KEY (UsuarioContaFK) REFERENCES Conta(UsuarioPK),
    FOREIGN KEY (IDConhecimentoFK) REFERENCES ConhecimentoSimio(IDPK)
);

CREATE TABLE Bloons_Upgrade (
    NomeBloonFK VARCHAR(50),
    CodUpgradeFK INT,
    PRIMARY KEY (NomeBloonFK, CodUpgradeFK),
    FOREIGN KEY (NomeBloonFK) REFERENCES Bloons(NomePK),
    FOREIGN KEY (CodUpgradeFK) REFERENCES Upgrade(CodPK)
);
